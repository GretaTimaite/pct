<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting and using data from the PCT • pct</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting and using data from the PCT">
<meta property="og:description" content="pct">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pct</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/pct.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cycling-potential-uk.html">Cycling potential in UK cities</a>
    </li>
    <li>
      <a href="../articles/getting.html">Getting and using data from the PCT</a>
    </li>
    <li>
      <a href="../articles/km-cycled.html">Estimating distance cycled per zone in England and Wales regions</a>
    </li>
    <li>
      <a href="../articles/pct-international.html">International application of the PCT methods</a>
    </li>
    <li>
      <a href="../articles/pct_training.html">Propensity to Cycle Tool Advanced Workshop</a>
    </li>
    <li>
      <a href="../articles/uk-cities.html">Reproducing cycling potential estimates in UK cities</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ITSLeeds/pct/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting_files/jquery-1.11.3/jquery.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1">
<link href="getting_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="getting_files/bootstrap-3.3.5/js/bootstrap.min.js"></script><script src="getting_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script><script src="getting_files/bootstrap-3.3.5/shim/respond.min.js"></script><style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="getting_files/navigation-1.1/tabsets.js"></script><script src="getting_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting and using data from the PCT</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ITSLeeds/pct/blob/master/vignettes/getting.Rmd"><code>vignettes/getting.Rmd</code></a></small>
      <div class="hidden name"><code>getting.Rmd</code></div>

    </div>

    
    
<p>If you are following this guide as part of the <a href="https://hopin.com/events/cycle-active-city-2021">Cycle City Active City 2021</a> conference, the workshops are scheduled at the following times:</p>
<ul>
<li><p>Propensity to Cycle Tool: getting and using the data, based on section <a href="#getting-and-exploring-pct-data">1</a> 11:30 - 12:30</p></li>
<li><p>Propensity to Cycle Tool: build your own scenarios, based on section <a href="#modelling-change">2</a> 13:30 - 14:30</p></li>
</ul>
<div id="getting-and-exploring-pct-data" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-and-exploring-pct-data" class="anchor"></a><span class="header-section-number">1</span> Getting and exploring PCT data</h1>
<!-- From ccac 2021 -->
<p>In this section you will learn about the open datasets provided by the PCT project and how to use them.
While the most common use of the PCT is via the interactive web application hosted at www.pct.bike, there is much value in downloading the data, e.g. to identify existing cycling infrastructure in close proximity to routes with high potential, and to help identify roads in need of interventions from a safety perspective, using data from the constantly evolving and community-driven global geographic database OpenStreetMap (OSM) <span class="citation">(Barrington-Leigh and Millard-Ball 2017)</span>.</p>
<p>In this session, which assumes you know how to have experience using QGIS, or R, you will learn how to:</p>
<ul>
<li>Find data on travel behaviour from the 2011 Census and from the School Census</li>
<li>How to download and import data from the PCT into QGIS</li>
<li>How to process the data alongside infrastructure data, to help find gaps in the network</li>
</ul>
<div id="getting-pct-data-from-the-pct-website" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-pct-data-from-the-pct-website" class="anchor"></a><span class="header-section-number">1.1</span> Getting PCT data from the PCT website</h2>
<p>In this example we will use data from North Yorkshire, an area with urban areas surrounding York and many rural areas.
You can use the PCT, which works at the regional level, for North Yorkshire or any other region by clicking on the area you’re interested in on the main map at <a href="https://www.pct.bike" class="uri">https://www.pct.bike</a>.
If you know the URL of the region you’re interested in, you can navigate straight there, in this case by typing in on clicking on the link <a href="https://www.pct.bike/m/?r=north-yorkshire" class="uri">https://www.pct.bike/m/?r=north-yorkshire</a>.</p>
<p>From there you will see a map showing the region.
Before you download and use PCT data, it is worth exploring it on the PCT web app.</p>
<p><strong>Exercise: explore the current level and distribution of cycling:</strong></p>
<ul>
<li>Explore different data layers contained in the PCT by selecting different options from the dropdown menus on the right.</li>
<li>Look at the different types of Cycling Flows options and consider: which visualisation layer is most useful?</li>
</ul>
<!-- It depends --><ul>
<li>Bonus: find the areas that would benefit from improved cycling provision on Clifton bridge, 1 km northwest from central York over the River Ouse (see result in Figure <a href="#fig:clifton">1.1</a>)<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</li>
</ul>
<div class="figure">
<span style="display:block;" id="fig:clifton"></span>
<img src="https://user-images.githubusercontent.com/1825120/130370123-5b8885de-4aed-43b4-8a49-b2f875ffff1b.png" alt="Areas that may benefit from improved cycle provision on Clifton Bridge, according to the PCT."><p class="caption">
Figure 1.1: Areas that may benefit from improved cycle provision on Clifton Bridge, according to the PCT.
</p>
</div>
</div>
<div id="downloading-data-from-the-pct-in-geojson-form" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-data-from-the-pct-in-geojson-form" class="anchor"></a><span class="header-section-number">1.2</span> Downloading data from the PCT in GeoJSON form</h2>
<p>On the PCT web app Click on the Region data tab, shown in the top of Figure <a href="#fig:clifton">1.1</a>, just beneath the ‘north’ in the URL.
You should see a web page like that shown in Figure <a href="#fig:downloads">1.2</a>, which highlights the Region data table alongside the Map, Region stats, National Data, Manual, and About page links.</p>
<div class="figure">
<span style="display:block;" id="fig:downloads"></span>
<img src="https://user-images.githubusercontent.com/1825120/130371496-bd0d22ba-c969-4634-904a-0bd0dd924516.png" alt="The Region data tab in the PCT."><p class="caption">
Figure 1.2: The Region data tab in the PCT.
</p>
</div>
<ul>
<li>Download the Zones (LSOA) dataset in geojson format</li>
<li>Download the Route network layer in <a href="https://npttile.vs.mythic-beasts.com/pct-outputs-regional-notR/commute/lsoa/north-yorkshire/rnet_full.geojson">geojson</a> format</li>
<li>Download the Fast routes in <a href="https://npttile.vs.mythic-beasts.com/pct-outputs-regional-notR/commute/lsoa/north-yorkshire/rf.geojson">geojson</a> format (warning: this file is nearly 100 MB in size so may take some time to download)</li>
</ul>
</div>
<div id="visualising-pct-data-in-qgis" class="section level2">
<h2 class="hasAnchor">
<a href="#visualising-pct-data-in-qgis" class="anchor"></a><span class="header-section-number">1.3</span> Visualising PCT data in QGIS</h2>
<p>In this section we assume you have a recent version of QGIS installed and have some experience using this popular and powerful free and open source desktop GIS software.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
Open QGIS and create a new <a href="https://docs.qgis.org/3.16/en/docs/user_manual/introduction/project_files.html">project</a> and name it pctdemo.</p>
<p>Once in the project, open the three layers you downloaded in the previous section.
You should see something resembling the screenshot shown in Figure <a href="#fig:pctqgis1">1.3</a>.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div class="figure">
<span style="display:block;" id="fig:pctqgis1"></span>
<img src="https://user-images.githubusercontent.com/1825120/130372558-629b7fb5-452c-4a44-80bb-2d88a0492be9.png" alt="Three PCT layers visualised in QGIS."><p class="caption">
Figure 1.3: Three PCT layers visualised in QGIS.
</p>
</div>
<p>After you have the data in QGIS as shown in Figure <a href="#fig:pctqgis1">1.3</a> a wide range of analysis options are opened up.
We can only cover a few of these in here, due to space and time constraints, and it is worth being guided by local policy priorities rather than the technology to ensure useful (not just attractive or eye-catching) results.
One major issue that is apparent in Figure <a href="#fig:pctqgis1">1.3</a> is that the zones seem squashed.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>
We can deal with this by changing the coordinate reference system (CRS) of the map visualisation.
It may also be worth reprojecting the data, to the official projected CRS in the UK: EPSG:27700.
Undertake these tasks in the exercises below:</p>
<ul>
<li>Change the CRS of the map to EPSG:27700 by clicking on the CRS button in the bottom right of the map, just to the right of the Render text in the figures above</li>
<li>Save each of the layers in this same CRS by right clicking on the layer, selecting Export, and setting the CRS there (take care to export the data into the same folder that the project is in)</li>
</ul>
</div>
<div id="comparing-pct-data-with-transport-network-data" class="section level2">
<h2 class="hasAnchor">
<a href="#comparing-pct-data-with-transport-network-data" class="anchor"></a><span class="header-section-number">1.4</span> Comparing PCT data with transport network data</h2>
<p>Find all the fast routes that intersect with a 10 m buffer surrounding Clifton Bridge (note: this is a time consuming task).<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>Don’t worry if you do not have time to complete each of the steps needed to find the result.
You can see how it works by opening the project pctqgis3.qgz in the <a href="https://github.com/ITSLeeds/pct/releases/download/0.8.0/pctqgis.zip">pctqgis.zip</a> file.
The result should look something like the screenshot shown in Figure <a href="#fig:cliftonbuffer">1.4</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:cliftonbuffer"></span>
<img src="https://user-images.githubusercontent.com/1825120/130374644-549c6de7-97fb-4fff-8356-fa59aa7d481e.png" alt="All fast routes that intersect with Clifton Bridge in QGIS."><p class="caption">
Figure 1.4: All fast routes that intersect with Clifton Bridge in QGIS.
</p>
</div>
<p>What is the difference between the route data shown in QGIS in Figure <a href="#fig:cliftonbuffer">1.4</a> and the route data shown in the PCT web app in Figure <a href="#fig:clifton">1.1</a>?</p>
</div>
<div id="identifying-gaps-in-the-network" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-gaps-in-the-network" class="anchor"></a><span class="header-section-number">1.5</span> Identifying gaps in the network</h2>
<p>This section assumes you have data on the regional cycle network.
For the purposes of this worked example, we used a broad definition of ‘cycle infrastructure’ based on <a href="http://k1z.blog.uni-heidelberg.de/2020/10/02/how-to-become-ohsome-part-8-complex-analysis-with-the-magical-filter-parameter/">research</a> undertaken at the University of Heidelberg.
Using this definition, a cycle infrastructure layer was extracted from OSM using R.
The data was exported from R into the <code>cycle_infra_projected.gpkg</code>, which is provided in the <code>pctqgis.zip</code> file mentioned in the previous sections.</p>
<p>In this section we will load the cycle infrastructure layer, buffer it, and undertake a geographic operation to identify places where there are gaps in the network.
<!-- Todo: identify existing cycle infrastructures that are important --></p>
<ul>
<li>Load the <code>cycle_infra_projected.gpkg</code> dataset</li>
<li>Buffer it to 100 m</li>
<li>Clip the route network layer to include only areas outside the buffer</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"https://user-images.githubusercontent.com/1825120/130415597-e7bcb8a1-4792-48de-ba83-118c082584cb.png"</span><span class="op">)</span></code></pre></div>
<p><img src="https://user-images.githubusercontent.com/1825120/130415597-e7bcb8a1-4792-48de-ba83-118c082584cb.png"><!-- --></p>
</div>
<div id="getting-pct-data-with-r" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-pct-data-with-r" class="anchor"></a><span class="header-section-number">1.6</span> Getting PCT data with R</h2>
<p>We will get PCT data at the MSOA level and plot the result in a simple map.</p>
<ul>
<li>G1: The first stage is to load packages we will use:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://itsleeds.github.io/pct/">pct</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>      <span class="co"># key package for working with spatial vector data</span></code></pre></div>
<pre><code>## Linking to GEOS 3.8.1, GDAL 3.2.1, PROJ 7.2.1</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>   <span class="co"># in the tidyverse</span></code></pre></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mtennekes/tmap">tmap</a></span><span class="op">)</span>    <span class="co"># installed alongside mapview</span></code></pre></div>
<ul>
<li>G2: After setting the region name (to avoid re-typing it many times) run the following commands to download data at the four main levels used in the PCT:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">region_name</span> <span class="op">=</span> <span class="st">"north-yorkshire"</span>
<span class="va">zones_all</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_pct_zones.html">get_pct_zones</a></span><span class="op">(</span><span class="va">region_name</span>, geography <span class="op">=</span> <span class="st">"msoa"</span><span class="op">)</span>
<span class="va">lines_all</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_pct_lines.html">get_pct_lines</a></span><span class="op">(</span><span class="va">region_name</span>, geography <span class="op">=</span> <span class="st">"msoa"</span><span class="op">)</span>
<span class="va">routes_all</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_pct_routes_fast.html">get_pct_routes_fast</a></span><span class="op">(</span><span class="va">region_name</span>, geography <span class="op">=</span> <span class="st">"msoa"</span><span class="op">)</span>
<span class="va">rnet_all</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_pct_rnet.html">get_pct_rnet</a></span><span class="op">(</span><span class="va">region_name</span><span class="op">)</span></code></pre></div>
<ul>
<li>G3: Check the downloads worked by plotting the result as follows:</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">zones_all</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">lines_all</span><span class="op">$</span><span class="va">geometry</span>, col <span class="op">=</span> <span class="st">"blue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">routes_all</span><span class="op">$</span><span class="va">geometry</span>, col <span class="op">=</span> <span class="st">"green"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">rnet_all</span><span class="op">$</span><span class="va">geometry</span>, col <span class="op">=</span> <span class="st">"red"</span>, lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">rnet_all</span><span class="op">$</span><span class="va">bicycle</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="getting_files/figure-html/plotall-1.png" width="70%"></p>
</div>
</div>
<div id="modelling-change" class="section level1">
<h1 class="hasAnchor">
<a href="#modelling-change" class="anchor"></a><span class="header-section-number">2</span> Modelling change</h1>
<!-- From ccag 2021 -->
<p>This section is designed for people with experience with the PCT and cycling uptake estimates who want to learn more about how uptake models work and how to generate new scenarios of change.
Reproducible and open R code will be used to demonstrate the concepts so knowledge of R or other programming languages is recommended but not essential, as there will be conceptual exercises covering the factors linked to mode shift.
In it you will:</p>
<ul>
<li>Learn about the uptake model underlying the Propensity to Cycle Tool scenarios</li>
<li>Develop your own uptake model in conceptual terms, e.g., to represent the government’s target for 50% of all trips in cities to be made by walking and cycling by 2030</li>
<li>Learn how to train uptake models against data, to build evidence-based uptake models</li>
</ul>
<div id="pct-scenarios" class="section level2">
<h2 class="hasAnchor">
<a href="#pct-scenarios" class="anchor"></a><span class="header-section-number">2.1</span> PCT scenarios</h2>
<ul>
<li>S1: Generate a ‘Go Dutch’ scenario for the North Yorkshire using the function <code><a href="../reference/uptake_pct_godutch.html">uptake_pct_godutch()</a></code> (hint: the following code chunk will create a ‘Government Target’ scenario):</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lines_all</span><span class="op">$</span><span class="va">pcycle</span> <span class="op">=</span> <span class="va">lines_all</span><span class="op">$</span><span class="va">bicycle</span> <span class="op">/</span> <span class="va">lines_all</span><span class="op">$</span><span class="va">all</span>
<span class="va">lines_all</span><span class="op">$</span><span class="va">euclidean_distance</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_length</a></span><span class="op">(</span><span class="va">lines_all</span><span class="op">)</span><span class="op">)</span>
<span class="va">lines_all</span><span class="op">$</span><span class="va">pcycle_govtarget</span> <span class="op">=</span> <span class="fu"><a href="../reference/uptake_pct_govtarget.html">uptake_pct_govtarget_2020</a></span><span class="op">(</span>
  distance <span class="op">=</span> <span class="va">lines_all</span><span class="op">$</span><span class="va">rf_dist_km</span>,
  gradient <span class="op">=</span> <span class="va">lines_all</span><span class="op">$</span><span class="va">rf_avslope_perc</span>
  <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">+</span> <span class="va">lines_all</span><span class="op">$</span><span class="va">pcycle</span></code></pre></div>
<div class="figure">
<img src="getting_files/figure-html/dutch_pcycle-1.png" alt="Percent cycling currently (left) and under a 'Go Dutch' scenario (right) in the Isle of Wight." width="672"><img src="getting_files/figure-html/dutch_pcycle-2.png" alt="Percent cycling currently (left) and under a 'Go Dutch' scenario (right) in the Isle of Wight." width="672"><p class="caption">
(#fig:dutch_pcycle)Percent cycling currently (left) and under a ‘Go Dutch’ scenario (right) in the Isle of Wight.
</p>
</div>
<ul>
<li>S2: Think of alternative scenarios that would be useful for your work</li>
<li>S3 (bonus): look inside the function <a href="https://github.com/ITSLeeds/pct/blob/master/R/uptake.R#L36"><code>pct_uptake_godutch()</code></a> - how could it be modified?</li>
</ul>
</div>
<div id="developing-new-scenarios-of-change" class="section level2">
<h2 class="hasAnchor">
<a href="#developing-new-scenarios-of-change" class="anchor"></a><span class="header-section-number">2.2</span> Developing new scenarios of change</h2>
</div>
<div id="training-uptake-models-against-new-datasets" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#training-uptake-models-against-new-datasets" class="anchor"></a>Training uptake models against new datasets</h2>
<div id="refs" class="references">
<div id="ref-barrington-leigh_world_2017">
<p>Barrington-Leigh, Christopher, and Adam Millard-Ball. 2017. “The World’s User-Generated Road Map Is More Than 80% Complete.” <em>PLOS ONE</em> 12 (8): e0180698. <a href="https://doi.org/10.1371/journal.pone.0180698">https://doi.org/10.1371/journal.pone.0180698</a>.</p>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>
Hint: Select the Fast Routes option from the Cycling Flows menu, zoom into the Bridge, and then click on the Freeze Lines checkbox to prevent the selected routes from moving when you zoom back out.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>
This tutorial was tested on QGIS version 3.20 but it should work fine on other versions, including the Long Term Support version (3.16 at the time of writing in summer 2021).
To install the latest version of QGIS see <a href="https://qgis.org/en/site/forusers/download.html">qgis.org</a>.
If you are new to QGIS, it is worth taking a look at the User Guide at <a href="https://docs.qgis.org/3.16/en/docs/user_manual/">docs.qgis.org</a> and, for a transport-oriented introduction, the <a href="https://itsleeds.github.io/QGIS-intro/">QGIS for Transport Research</a> resource developed by the University of Leeds.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>
A great thing about QGIS projects is that, like RStudio projects, they make organising and sharing your work easier.
You should be able to see exactly the same project state as that shown in the figure by downloading the zip file at <a href="https://github.com/ITSLeeds/pct/releases/download/0.8.0/pctqgis.zip" class="uri">https://github.com/ITSLeeds/pct/releases/download/0.8.0/pctqgis.zip</a> and opening the pctqgis1.qgz file in QGIS.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>
This is because QGIS, unlike R’s spatial packages, shows geographic (longitude/latitude) coordinates as if they were projected, which makes maps seem squashed at high latitudes far from the equator.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>
Hint: installing the QuickOSM and QuickMapServices plugins may help.
You will need to transform the bridge before finding a buffer around it.
You will need to use the Select by Location Vector Research tool.<a href="#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Robin Lovelace, Layik Hama.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
